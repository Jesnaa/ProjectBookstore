{% extends 'base1.html' %}
{% load static %}

{% block content %}
{% csrf_token %}

		<!-- BREADCRUMB -->
		<div id="breadcrumb" class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">
					<div class="col-md-12">
						<h3 class="breadcrumb-header">Checkout</h3>
						<ul class="breadcrumb-tree">
							<li><a href="#">Home</a></li>
							<li class="active">Checkout</li>
						</ul>
					</div>
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /BREADCRUMB -->

		<!-- SECTION -->
		<div class="section">
			<!-- container -->
			<div class="container">
				<!-- row -->
				<div class="row">

					<div class="col-md-7">
						<!-- Billing Details -->
						<div class="billing-details">
							<div class="section-title">
								<h3 class="title">Billing address</h3>
							</div>
							<div class="form-group">
								<input class="input" type="text" name="first-name"  placeholder="First Name" value="{{user.first_name}}" readonly>
							</div>
							<div class="form-group">
								<input class="input" type="text" name="last-name" placeholder="Last Name" value="{{user.last_name}}" readonly>
							</div>
							<div class="form-group">
								<input class="input" type="email" name="email" placeholder="Email" value="{{user.email}}" readonly>
							</div>

							<div class="form-group">
								<input class="input" type="text" name="phonenumber" placeholder="Phone Number" value="{{user.phonenumber}}" readonly>
							</div>
							<div class="form-group">
								<input class="input" type="text" hname="address" placeholder="House  Name" value="{{user.hname}}" readonly>
							</div>
							<div class="form-group">
								<input class="input" type="text" name="pincode" placeholder="Pin Code" value="{{user.pincode}}" readonly>
							</div>
							<div class="form-group">
								<input class="input" type="text" name="city" placeholder="City" value="{{user.city}}" readonly>
							</div>
							<div class="form-group">
								<input class="input" type="text" name="country" placeholder="Country" value="{{user.country}}" readonly>
							</div>

<!--							<div class="form-group">-->
<!--								<div class="input-checkbox">-->
<!--									<input type="checkbox" id="create-account">-->
<!--									<label for="create-account">-->
<!--										<span></span>-->
<!--										Create Account?-->
<!--									</label>-->
<!--									<div class="caption">-->
<!--										<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.</p>-->
<!--										<input class="input" type="password" name="password" placeholder="Enter Your Password">-->
<!--									</div>-->
<!--								</div>-->
<!--							</div>-->
						</div>
						<!-- /Billing Details -->


								<label >
									<span></span>
									Ship to a diffrent address? <a href="{% url 'profile' %}" ><u>Add new Adress</u></a>
								</label>
<!--						<div class="row">-->
<!--<div class="col-md-3 col-xs-5">-->

<!--                                {% for i in address %}-->
<!--     <div class="product" >-->
<!-- <input type="radio" value="{{i.id}}" name="radio">-->
<!--<div class="product-body" >-->





<!--                                <table >-->
<!--                                    <tr><td style="color:#000;font-weight:bold;">{{i.first_name}} {{i.last_name}}</td></tr>-->
<!--                                    <tr><td style="color:#000;font-weight:bold;">{{i.phonenumber}}</td></tr>-->
<!--                                    <tr><td style="color:#000;font-weight:bold;">{{i.hname}}</td></tr>-->
<!--                                    <tr><td style="color:#000;font-weight:bold;">{{i.city}}</td></tr>-->
<!--                                    <tr><td style="color:#000;font-weight:bold;">{{i.state}}, pin-{{i.pincode}}</td></tr>-->
<!--&lt;!&ndash;                                <tr> <td> ________________________</td></tr>&ndash;&gt;-->

<!--                                </table>-->

<!-- </div>-->
<!--            </div>-->


<!--                                {% endfor %}-->
<!--                            </div>-->
<!--							</div>-->


<!--						{% if address %}-->
<!--  <form method="post" action="{% url 'paymentdone' %}">-->
<!--    {% csrf_token %}-->
<!--    {% for address in address %}-->
<!--      <div class="form-check">-->
<!--        <input class="form-check-input" type="radio" name="address" value="{{ address.id }}" id="address{{ address.id }}">-->
<!--        <label class="form-check-label" for="address{{ address.id }}">-->
<!--          {{ address.first_name }} {{ address.last_name }}<br>-->
<!--          {{ address.phonenumber }}<br>-->
<!--          {{ address.hname }}<br>-->
<!--          {{ address.city }}, {{ address.state }} - {{ address.pincode }}<br>-->
<!--          {{ address.country }}-->
<!--        </label>-->
<!--      </div>-->
<!--    {% empty %}-->
<!--      <p>You don't have any saved addresses.</p>-->
<!--    {% endfor %}-->
<!--  </form>-->
<!--{% else %}-->
<!--  <p>You don't have any saved addresses.</p>-->
<!--{% endif %}-->





						<!-- Shiping Details -->
<!--						<div class="shiping-details">-->
<!--							<div class="section-title">-->
<!--								<h3 class="title">Shiping address</h3>-->
<!--							</div>-->
<!--							<div class="input-checkbox">-->
<!--								<input type="checkbox" id="shiping-address">-->
<!--								<label for="shiping-address">-->
<!--									<span></span>-->
<!--									Ship to a diffrent address?-->
<!--								</label>-->
<!--								<div class="caption">-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="text" name="first-name" placeholder="First Name">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="text" name="last-name" placeholder="Last Name">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="email" name="email" placeholder="Email">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="text" name="address" placeholder="Address">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="text" name="city" placeholder="City">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="text" name="country" placeholder="Country">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="text" name="zip-code" placeholder="ZIP Code">-->
<!--									</div>-->
<!--									<div class="form-group">-->
<!--										<input class="input" type="tel" name="tel" placeholder="Telephone">-->
<!--									</div>-->
<!--								</div>-->
<!--							</div>-->
<!--						</div>-->
						<!-- /Shiping Details -->

<!--						&lt;!&ndash; Order notes &ndash;&gt;-->
<!--						<div class="order-notes">-->
<!--							<textarea class="input" placeholder="Order Notes"></textarea>-->
<!--						</div>-->
<!--						&lt;!&ndash; /Order notes &ndash;&gt;-->
					</div>

					<!-- Order Details -->

					<div class="col-md-5 order-details">
						<div class="section-title text-center">
							<h3 class="title">Your Order</h3>
						</div>
						<div class="order-summary">
							<div class="order-col">
								<div><strong>PRODUCT</strong></div>
								<div><strong>TOTAL</strong></div>
							</div>
							{% for i in product %}
							<div class="order-products">
								<div class="order-col">
									<div>{{i.product.book_name}}</div>
									<div>₹{{i.product.book_price}}.00</div>
								</div>
							</div>
							{% endfor %}
							<div class="order-col">
								<div>Shiping</div>
								<div><strong>FREE</strong></div>
							</div>

							<div class="order-col">
								<div><strong>TOTAL</strong></div>
								<div><strong class="order-total"> ₹{{total}}.00</strong></div>
							</div>

						</div>
						<div>
							<form  id="myform">
<!--						<div class="payment-method">-->
<!--							<div class="input-radio">-->
<!--								<input type="radio" name="payment" id="payment-1">-->
<!--								<label for="payment-1">-->
<!--									<span></span>-->
<!--									Direct Bank Transfer-->
<!--								</label>-->
<!--								<div class="caption">-->
<!--									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>-->
<!--								</div>-->
<!--							</div>-->
<!--							<div class="input-radio">-->
<!--								<input type="radio" name="payment" id="payment-2">-->
<!--								<label for="payment-2">-->
<!--									<span></span>-->
<!--									Cheque Payment-->
<!--								</label>-->
<!--								<div class="caption">-->
<!--									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>-->
<!--								</div>-->
<!--							</div>-->
<!--							<div class="input-radio">-->
<!--								<input type="radio" name="payment" id="payment-3">-->
<!--								<label for="payment-3">-->
<!--									<span></span>-->
<!--									Paypal System-->
<!--								</label>-->
<!--								<div class="caption">-->
<!--									<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>-->
<!--								</div>-->
<!--							</div>-->
<!--						</div>-->
<!--						<div class="input-checkbox" >-->
<!--							<input type="checkbox" id="terms" required>-->
<!--							<label for="terms">-->
<!--								<span ></span>-->
<!--								I've read and accept the <a href="#">terms & conditions</a>-->
<!--							</label>-->
<!--							-->
<!--						</div>-->




						<button id="rzp-button1" class="primary-btn order-submit" type="submit">PLACE ORDER</button>
							</form>
						</div>

						</div>
<!--						<button><a href="#" class="primary-btn order-submit">Place order</a></button>-->
					 <script>
                        var options = {
                            "key": 'rzp_test_7aOSCAvqMiNvCY', // Enter the Key ID generated from the Dashboard
                            "amount": "{{razoramount}}", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise
                            "currency": "INR",
                            "name": "BookRak",
                            "description": "Transaction",
                            "image": "https://example.com/your_logo",
                            "order_id": "{{order_id}}", //This is a sample Order ID. Pass the `id` obtained in the response of Step 1
                            "handler": function (response){
                                console.log("success")
                                var form = document.getElementById["myform"];


                                var a = response.razorpay_payment_id;

                                alert({{order_id}}'Payment done successfully.....Thanks for Ordering..... you can view the order details on your profile...Continue Shopping')

                                window.location.href = 'http://127.0.0.1:8000/paymentdone?order_id=${response.razorpay_order_id}&user_id=${response.USER}&payment_id='+a

                            },
                            "theme": {
                                "color": "#3399cc"
                            }
                        };
                        var rzp1 = new Razorpay(options);
                        rzp1.on('payment.failed', function (response){
                                alert(response.error.description);
                        });
                        document.getElementById('rzp-button1').onclick = function(e){
                            console.log("button click");
                            rzp1.open();
                            e.preventDefault();
                        }
                        </script>
					</div>
					<!-- /Order Details -->
				</div>
				<!-- /row -->
			</div>
			<!-- /container -->
		</div>
		<!-- /SECTION -->



			<!-- jQuery Plugins -->
			<script src="{% static 'js/jquery.min.js' %}"></script>
			<script src="{% static 'js/bootstrap.min.js' %}"></script>
			<script src="{% static 'js/slick.min.js' %}"></script>
			<script src="{% static 'js/nouislider.min.js' %}"></script>
			<script src="{% static 'js/jquery.zoom.min.js' %}"></script>
			<script src="{% static 'js/main.js' %}"></script>

{% endblock content %}